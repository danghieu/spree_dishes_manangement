<% content_for :page_title do %>
  <%= Spree.t(:ingredients) %>
<% end %>
<% content_for :page_actions do %>
  <%= button_link_to Spree.t(:new_ingredient), new_admin_ingredient_url, { :class => "btn-success", :icon => 'plus', :id => 'admin_new_ingredient' } %>
<% end if can?(:create, Dish::Ingredient) %>
<%= form_tag destroy_multiple_admin_ingredients_url, method: :delete do %>
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th class="col-md-2"><%= button Spree.t('actions.delete'), 'delete', 'submit', {class: 'btn-danger'} %></th>
      <th>Image</th>
      <th class="col-md-6"><%= Spree.t(:name) %></th>
      <th class="col-md-2">Tools</th>
    </tr>
  </thead>

  <tbody>
    <% @ingredients.each do |ingredient| %>
      <tr>
        <td ><%= check_box_tag "ingredients[]", ingredient.id %></td>
        <% if ingredient.images.any? %>
          <td class="align-center"><%= image_tag ingredient.images.first.attachment.url(:mini) %></td>
        <% else %>
          <td class="align-center"></td>
        <% end %>
        <td ><%= ingredient.name %></td>
        <td class="actions" data-hook="admin_products_index_row_actions">
            <%= link_to_edit ingredient, :no_text => true, :class => 'edit' if can?(:edit, ingredient) %>
            &nbsp;
            <%= link_to_delete ingredient, :no_text => true if can?(:delete, ingredient) %>
          </tds>
      </tr>
    <% end %>
  </tbody>
</table>

<% end %>
